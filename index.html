<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=0.6,maximum-scale=1,user-scalable=yes">
<meta charset="UTF-8">
<title>ticker-log</title>
<style>
body {
  margin: 0 20%;
  text-align: center;
}
</style>
</head>
<body>

<h1>ticker-log</h1>
<p>
<a href="https://www.npmjs.com/package/ticker-log">npm</a>
<a href="https://github.com/jonbri/ticker-log">GitHub</a>
</p>

<p>
To see ticker in action, press <code>`h</code> or click <button id="showHelp">here</button>
</p>

<p>
View-source for more usage examples.
</p>



<script>
//////////////////////////////////
// ticker lib
/* Thu May 12 21:15:44 EDT 2016 */
!function ticker_go(){function pseudoForEach(e,_,o){for(var n=0;n<e.length;n++)_.call(o,n,e[n])}function assignStyle(e,_){for(var o in _)_.hasOwnProperty(o)&&(e.style[o]=_[o])}function getUrlParamValue(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var _="[\\?&]"+e+"=([^&#]*)",o=new RegExp(_),n=o.exec(window.location.href);return null===n?null:n[1]}function config(e){for(var _ in e)oConfig[_]=e[_]}function print(e,_){_=_||{},oConfig.silentMode!==!0&&(_.textarea&&_renderTextarea(e),_.internal!==!0&&aBuffer.unshift(e),aRenderBuffer.unshift(e),_flushBuffer())}function test(){return oConfig.pauseMode===!0?void _nonSavedPrint("pauseMode"):void print("test: "+new Date)}function help(){oConfig.pauseMode=!1,kill(),oConfig.interval=oDEFAULTS.interval,oConfig.logStartTop=oDEFAULTS.logStartTop;for(var e=0;e<aHelp.length;e++){var _=aHelp[e];_=_.replace(/\_/g,"&nbsp;"),print(_)}}function kill(){oConfig.pauseMode=!1,aRenderBuffer=[];var e=document.querySelectorAll("._ticker");pseudoForEach(e,function(e,_){_.parentNode.removeChild(_)})}function pause(){print(oConfig.pauseMode?"pause off":"paused"),oConfig.pauseMode=!oConfig.pauseMode}function output(e){void 0===e&&(e=!1);var _="";if(e===!0)aBuffer.forEach(function(e){_+=e+"\n"});else{var o=document.querySelectorAll("._ticker_log");o.length>0&&pseudoForEach(o,function(e,o){var n=o.innerHTML.trim();n=n.replace(/&nbsp;/g,""),_+=n+"\n"})}_toggleTextarea({text:_,source:KEYS.O})}function outputAll(){output(!0)}function dump(){var e="";aConfigurableKeys.forEach(function(_){e+=_+": "+oConfig[_]+"\n"}),e+="listening to console."+oConfig.channel+"\n",_toggleTextarea({text:e,source:KEYS.D})}function silent(){oConfig.silentMode===!0?(oConfig.silentMode=!1,print("silent mode off")):oConfig.silentMode=!0}function increaseSpeed(){return oConfig.pauseMode?void _nonSavedPrint("pauseMode"):(oConfig.interval-=oConfig.adjustmentInterval/2,void print("speed: "+oConfig.interval))}function decreaseSpeed(){return oConfig.pauseMode?void _nonSavedPrint("pauseMode"):(oConfig.interval+=oConfig.adjustmentInterval,void print("speed: "+oConfig.interval))}function moveRight(){oConfig.align="right",_postConfigApply();var e=document.querySelectorAll("._ticker_log");pseudoForEach(e,function(e,_){_.style.right=0,_.style.left="inherit",_.style["text-align"]="right"}),test()}function moveLeft(){oConfig.align="left",_postConfigApply();var e=document.querySelectorAll("._ticker_log");pseudoForEach(e,function(e,_){_.style.left=0,_.style.right="inherit",_.style["text-align"]="left"}),test()}function saveConfig(){function e(){var e="_ticker={";return aConfigurableKeys.forEach(function(_){void 0!==oDEFAULTS[_]&&oDEFAULTS[_]===oConfig[_]||(e+="%22"+_+"%22:",e+="string"==typeof oConfig[_]?"%22"+oConfig[_]+"%22":oConfig[_],e+=",")}),e+="}",e=e.replace(/,}/,"}")}var _=window.location.href;_=_.replace(/_ticker=({.*})?&?/,""),-1===_.indexOf("?")&&(_+="?1=1"),_=_+"&"+e(),_=_.replace(/\?1=1&/,"?"),_=_.replace(/\?&/,"?"),_=_.replace(/(&&)+/,"&"),history.pushState?window.history.pushState({path:_},"",_):window.location.replace(_)}function moveUp(){return oConfig.pauseMode?void _nonSavedPrint("pauseMode"):(kill(),oConfig.logStartTop+=5,void print("start: "+oConfig.logStartTop))}function moveDown(){return oConfig.pauseMode?void _nonSavedPrint("pauseMode"):(kill(),oConfig.logStartTop-=5,void print("start: "+oConfig.logStartTop))}function registerMacro(e,_){return 9===e?void console.log("`","macro 9 reserved for interactive macro (`m)"):(console.log("`","registering macro: "+e),void(aMacros[e]=_))}function macroEdit(){var sDefaultText=oConfig.sMacro9Code;_toggleTextarea({text:sDefaultText,source:KEYS.M,buttons:{clear:function(){killTextarea(),macroEdit()}},exit:function(sValue){oConfig.sMacro9Code=sValue,console.log("`","registering macro: 9"),aMacros[9]=function(){eval(sValue)}}})}function runMacro(e){"function"==typeof aMacros[e]?(console.log("`","running macro: "+e),aMacros[e]()):console.log("`","macro empty")}function nextChannel(){for(var e=0,_=oConfig.channel;e<aChannels.length&&aChannels[e]!==_;e++);_listenToChannel(aChannels[(e+1)%aChannels.length]),print("listening to "+oConfig.channel)}function killTextarea(){var e=document.getElementById(sTextareaId);e&&e.parentNode.removeChild(e)}function restoreAndExit(){window.clearInterval(render_interval),kill(),killTextarea(),document.body.removeEventListener("keydown",fnKeyDown),document.body.removeEventListener("keyup",fnKeyUp),window._ticker=void 0,delete window._ticker,aChannels.forEach(function(e){console[e]=oChannels[e].fnOriginal})}function reset(){restoreAndExit(),ticker_go()}function _nonSavedPrint(e){print(e,{internal:!0})}function _startInterval(){var e=function(){if(window.clearInterval(render_interval),!oConfig.pauseMode){var _=document.querySelectorAll("._ticker_log");_.length>0&&pseudoForEach(_,function(e,_){var o=parseInt(getComputedStyle(_).top,10);if(0>=o)_.parentNode.removeChild(_);else{var n=o-_.offsetHeight+"px";_.style.top=n}})}render_interval=setInterval(e,oConfig.interval)};render_interval=setInterval(e,oConfig.interval)}function _postConfigApply(){function e(){"right"===oConfig.align?(oConfig.logStyle.right=0,oConfig.logStyle.left="inherit",oConfig.logStyle["text-align"]="right"):(oConfig.logStyle.right="inherit",oConfig.logStyle.left=0,oConfig.logStyle["text-align"]="left")}e()}function _loadConfigFromUrl(){var e,_=getUrlParamValue("_ticker");if(null!==_){try{e=JSON.parse(decodeURIComponent(_))}catch(o){}if("object"==typeof e)for(var n in e)oConfig[n]=e[n]}}function _setupListeners(){fnKeyDown=function(e){if(keyIsDown===!1&&e.keyCode===KEYS.BackTick&&(keyIsDown=!0),keyIsDown===!0){e.preventDefault();var _={};_[KEYS.B]=function(){oConfig.requireBackTick=!oConfig.requireBackTick,print("requireBackTick: "+oConfig.requireBackTick)},_[KEYS.D]=dump,_[KEYS.S]=silent,_[KEYS.T]=test,_[KEYS.O]=output,_[KEYS.L]=outputAll,_[KEYS.P]=pause,_[KEYS.K]=kill,_[KEYS.H]=help,_[KEYS.M]=macroEdit,_[KEYS.Up]=increaseSpeed,_[KEYS.Down]=decreaseSpeed,_[KEYS.Right]=moveRight,_[KEYS.Left]=moveLeft,_[KEYS.PageDown]=moveDown,_[KEYS.PageUp]=moveUp,_[KEYS.Enter]=saveConfig,_[KEYS.Tab]=nextChannel,_[KEYS.Esc]=killTextarea,[0,1,2,3,4,5,6,7,8,9].forEach(function(e){_[KEYS[e]]=function(){runMacro(e)}}),"function"==typeof _[e.keyCode]&&_[e.keyCode]()}},fnKeyUp=function(e){keyIsDown===!0&&-1===aActionKeys.indexOf(e.keyCode)&&(keyIsDown=!1)},document.body.addEventListener("keydown",fnKeyDown),document.body.addEventListener("keyup",fnKeyUp)}function _calculateTop(){var e=document.querySelector("._ticker_log:last-child");return e?parseInt(e.style.top,10)+e.offsetHeight:oConfig.logStartTop}function _renderText(e){var _=document.createElement("div");_.className="_ticker",assignStyle(_,oConfig.logStyle),_.className+=" _ticker_log",_.innerHTML=e;var o=_calculateTop();o<oConfig.logStartTop/2&&(o=oConfig.logStartTop),_.style.top=o+"px",document.body.appendChild(_)}function _flushBuffer(){for(;aRenderBuffer.length>0&&_calculateTop()<iAllowedHeight;)_renderText(aRenderBuffer.pop())}function _listenToChannel(e){var _=oConfig.channel;_&&"function"==typeof oChannels[_].fnOriginal&&(console[_]=oChannels[_].fnOriginal),oConfig.channel=e,console[e]=function(_,o){var n=_;"`"===_&&(n=o),oConfig.requireBackTick===!1?print(n):oConfig.requireBackTick===!0&&"`"===_?print(n):oChannels[e].fnOriginal.apply(this,[arguments])}}function _renderTextarea(e){var _=window.innerHeight,o=window.innerWidth,n=document.createElement("div");n.id=sTextareaId,n.style.position="fixed",n.style.left=0,n.style.top=0,n.style["z-index"]=9999,n.style.width=o/3+"px",n.style.height=_-10+"px";var t=document.createElement("textarea");t.style.height="100%",t.style.width="100%",t.innerHTML=e,n.appendChild(t),document.body.appendChild(n)}function _toggleTextarea(e){oConfig.lastTextareaAction!==e.source&&killTextarea(),oConfig.lastTextareaAction=e.source;var _;if(document.getElementById(sTextareaId)){if(oConfig.pauseMode=!1,"function"==typeof e.exit){_=document.getElementById(sTextareaId);var o=_.querySelectorAll("textarea")[0];e.exit(o.value)}killTextarea()}else if(oConfig.pauseMode=!0,_renderTextarea(e.text),_=document.getElementById(sTextareaId),"object"==typeof e.buttons){var n=document.createElement("div");n.style.position="absolute",n.style.bottom=0,n.style.left=0,n.style.height="20px",n.style.borderTopWidth="1px",n.style.borderTopStyle="solid",n.style.width="100%",n.style.paddingTop="5px";for(var t in e.buttons)if(e.buttons.hasOwnProperty(t)){var i=document.createElement("button");i.innerHTML=t,i.onclick=e.buttons[t],i.style["float"]="left",n.appendChild(i)}_.appendChild(n)}}if(!document.body)return void console.warn("ticker-log: no dom found, exiting");var aChannels=["log","debug","warn","error","trace"],oChannels={},oDEFAULTS={interval:300,logStartTop:100,align:"left",requireBackTick:!0,channel:"log"},oConfig={silentMode:!1,pauseMode:!1,adjustmentInterval:25,lastTextareaAction:void 0,sMacro9Code:"// macro 9\r\r",logStyle:{position:"fixed",color:"black","background-color":"#F2F2F2",padding:"1px","z-index":9998,top:0,left:0,"font-family":"monospace","font-size":"14px",opacity:.85}},aBuffer=[],aRenderBuffer=[],render_interval,aMacros={},iAllowedHeight=1.25*window.innerHeight,aConfigurableKeys=["interval","logStartTop","align","requireBackTick","channel"],sTextareaId="_tickerTextarea",keyIsDown=!1,fnKeyDown,fnKeyUp,aHelp=["___________________________________","ticker-log_________________________","___________________________________","Enter commands: `key_______________","___________________________________","h__-> help_________________________","t__-> test_________________________","p__-> pause (freeze output)________","k__-> kill (remove all)____________","o__-> output (show in textarea)____","l__-> output all (all past logging)","d__-> dump (show config values)____",'b__-> toggle api "`" requirement___',"0-9-> invoke macros________________","m__-> enter macro 9________________","___________________________________","up______-> increase speed__________","down____-> decrease speed__________","right___-> move logs right_________","left____-> move logs left__________","pageup__-> increase starting point_","pagedown-> decrease starting point_","tab_____-> change console channel__","___________________________________","enter -> save configuration in url_","___________________________________","Print to the screen:_______________",'__>> console.log("`", "hello...")__',"___________________________________","-__________________________________","-__________________________________","-__________________________________"],KEYS={Tab:9,Enter:13,Esc:27,PageDown:33,PageUp:34,Left:37,Up:38,Right:39,Down:40,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,H:72,K:75,L:76,M:77,O:79,P:80,S:83,T:84,BackTick:192},aActionKeys=[KEYS.Tab,KEYS.Esc,KEYS.PageDown,KEYS.PageUp,KEYS.Left,KEYS.Up,KEYS.Right,KEYS.Down,KEYS[0],KEYS[1],KEYS[2],KEYS[3],KEYS[4],KEYS[5],KEYS[6],KEYS[7],KEYS[8],KEYS[9],KEYS.A,KEYS.B,KEYS.C,KEYS.D,KEYS.H,KEYS.K,KEYS.L,KEYS.M,KEYS.O,KEYS.P,KEYS.S,KEYS.T];aChannels.forEach(function(e){oChannels[e]={fnOriginal:console[e]}});for(var sKey in oDEFAULTS)oConfig[sKey]=oDEFAULTS[sKey];_loadConfigFromUrl(),_postConfigApply(),_listenToChannel(oConfig.channel),setInterval(function(){_flushBuffer()},250),_startInterval(),_setupListeners(),function(){var e={};e.config=config,e.test=test,e.help=help,e.kill=kill,e.silent=silent,e.pause=pause,e.output=output,e.outputAll=outputAll,e.dump=dump,e.moveDown=moveDown,e.moveUp=moveUp,e.moveLeft=moveLeft,e.moveRight=moveRight,e.increaseSpeed=increaseSpeed,e.decreaseSpeed=decreaseSpeed,e.nextChannel=nextChannel,e.print=print,e.registerMacro=registerMacro,e.runMacro=runMacro,e.macroEdit=macroEdit,e.restoreAndExit=restoreAndExit,e.reset=reset,e._oConfig=oConfig,window._ticker=e}()}();
</script>





<script>
//////////////////////////////////
// ticker-log examples...

// wire up "help" button
document.getElementById('showHelp').onclick = function() {
  window._ticker.help();
};

// play intro message
var iDelay = 750;
setTimeout(function() {
  console.log('`', 'welcome to ticker-log...');
  setTimeout(function() {
    console.log('`', 'for <em>interactive-style</em>,');
    setTimeout(function() {
      console.log('`', 'on-screen logging!');
    }, iDelay*2);
  }, iDelay*2);
}, iDelay);

// register some macros...

var sWatchedVariable = 0;

// simulate on-going changes to variable to watch
setInterval(function() {
  sWatchedVariable++;
}, 250);

// show "watched" variable
window._ticker.registerMacro('1', function() {
  console.log('`', "sWatchedVariable's value: " + sWatchedVariable);
});

// show text in textarea
window._ticker.registerMacro('2', function() {
  window._ticker.print('hello textarea.\rPress `<esc> to remove', {
    textarea: true
  });
});

// flood ticker (buffering occurs)
window._ticker.registerMacro('3', function() {
  function generateStars(i) {
    return (i === 0) ? '' : "*" + generateStars(i - 1);
  }
  function howMany(i) {
    return (function f(j) {
      return (i % j === 0) ? j : f(j - 1);
    }(9));
  }
  // render random stars to show movement
  for (var i = 0; i < 5000; i++) {
      console.log('`', generateStars(howMany(i)*2));
  }
});

// kill "registering macro..." messages
window._ticker.kill();

</script>
</body>
</html>